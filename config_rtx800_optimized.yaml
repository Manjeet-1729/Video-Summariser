# Optimized Configuration for Dual NVIDIA Quadro RTX 8000
# Total VRAM: 96GB (2x 48GB)

models:
  blip2:
    model_name: "Salesforce/blip2-flan-t5-xl"
    device: "cuda:0"
  
  whisper:
    model_name: "large-v2"
    device: "cuda:0"
  
  t5:
    model_name: "t5-large"
    max_input_length: 2048
    max_output_length: 512
    device: "cuda:1"

video_processing:
  frame_extraction:
    fps: 2
    max_frames: 100
  
  audio_extraction:
    sample_rate: 16000

training:
  batch_size: 16
  gradient_accumulation_steps: 2
  num_epochs: 15
  learning_rate: 3e-5
  warmup_steps: 1000
  weight_decay: 0.01
  max_grad_norm: 1.0
  save_steps: 500
  eval_steps: 250
  logging_steps: 50
  output_dir: "./outputs"
  checkpoint_dir: "./checkpoints"

  use_multi_gpu: true
  device_ids: [1]

data:
  train_data_path: "./data/train"
  val_data_path: "./data/val"
  test_data_path: "./data/test"
  processed_data_dir: "./data/processed"

inference:
  beam_size: 8
  temperature: 0.9
  top_p: 0.92
  repetition_penalty: 1.3
  length_penalty: 1.0
  no_repeat_ngram_size: 3

system:
  num_workers: 8
  seed: 42
  use_wandb: true
  wandb_project: "video-summarizer-rtx8000"

  mixed_precision: true
  pin_memory: true

performance:
  parallel_preprocessing: true
  preprocessing_batch_size: 8

  cache_features: true
  cache_dir: "./cache"
